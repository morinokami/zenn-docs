---
title: "ã‚ã‚‰ã‚†ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ Hono ã‚’ä½¿ã„ãŸã„"
emoji: "ğŸ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["hono", "nextjs", "astro", "nuxtjs", "sveltekit"]
published: true
---

## ã¯ã˜ã‚ã«

Hono ã®å£²ã‚Šã®ä¸€ã¤ã«ã€Œ[ã‚¦ã‚§ãƒ–æ¨™æº–ã¸ã®æº–æ‹ ](https://hono.dev/docs/concepts/web-standard)ã€ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ç‰¹å¾´ã«ã‚ˆã‚Šã€é–‹ç™ºè€…ã¯ Hono ã‚¢ãƒ—ãƒªã‚’æ§˜ã€…ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¸ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã ã‘ã§ã‚‚ç´ æ™´ã‚‰ã—ã„ã“ã¨ã§ã™ãŒã€Hono å¥½ãã®æ–¹ã€…ã¯ãã‚Œã§ã¯é£½ãè¶³ã‚‰ãšã€Hono ãŒã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request`/`Response` ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹ã¨ã„ã†äº‹å®Ÿã‚’åˆ©ç”¨ã—ã€ãŠãã‚‰ãã¯ã‚‚ã¨ã‚‚ã¨æƒ³å®šã•ã‚Œã¦ã„ãªã‹ã£ãŸã§ã‚ã‚ã†å ´æ‰€ã§ã‚‚ Hono ã‚’ä½¿ã„å§‹ã‚ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ç­†è€…ãŒç‰¹ã«æ³¨ç›®ã™ã‚‹ã®ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã®ã‚ˆã†ã« Hono ã‚’ Next.js ãªã©ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ¡ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«çµ„ã¿è¾¼ã‚€ã‚ˆã†ãªè©¦ã¿ã§ã™:

https://zenn.dev/chot/articles/e109287414eb8c

ã“ã†ã—ãŸæ–‡ç« ã‚’èª­ã¿ã€ã€Œã“ã‚Œã¯è‰²ã€…ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«å¿œç”¨ã§ããã†ã ã€ã¨è€ƒãˆã€Next.js ã ã‘ã§ã¯ãªã Astro ã‚„ Nuxt ãªã©ã§ã‚‚ Hono ã‚’å‹•ã‹ã™å®Ÿé¨“ã‚’ãŠã“ãªã„ã€ãã‚Œã‚’ã¾ã¨ã‚ãŸçµæœãŒã“ã®è¨˜äº‹ã¨ãªã‚Šã¾ã™ã€‚ã“ã®è¨˜äº‹ã‚’èª­ã‚ã°ã€ã€Œãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å¯„ã‚Šã®é–‹ç™ºã§ã‚‚ Hono ãŒæ›¸ããŸã„ã‚“ã˜ã‚ƒï¼ã€ã¨ã„ã†ã‚ãŒã¾ã¾ãªæ¬²æ±‚^[å®Ÿéš›ã®ã¨ã“ã‚ã€ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãƒ•ã‚§ãƒ¼ã‚ºã§ã•ã£ã¨ API ã‚’å®šç¾©ã—ãŸã„å ´åˆãªã©ã«ã¯ä¾¿åˆ©ã§ã—ã‚‡ã†ã—ã€ã¾ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å›ºæœ‰ã®çŸ¥è­˜ãŒãªãã¨ã‚‚ Hono ã®æ›¸ãæ–¹ã‚’çŸ¥ã£ã¦ã„ã‚Œã° API ã‚’è¨˜è¿°ã§ãã‚‹ã¨ã‚‚ã„ãˆã‚‹ãŸã‚ã€å˜ãªã‚‹éŠã³ã®æ ã‚’è¶…ãˆã¦æœ‰ç”¨ã§ã‚ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚]ãŒæº€ãŸã›ã‚‹ã€ã‚ã‚‹ã„ã¯ãã®ãŸã‚ã®ãƒ’ãƒ³ãƒˆãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚ä»Šå›ã¯ä»¥ä¸‹ã® 4 ã¤ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã« Hono ã‚’çµ„ã¿è¾¼ã¿ã€Cloudflare Pages ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ãŠã“ãªã„ã¾ã—ãŸ^[ãªãŠã€ç­†è€…ã¯ Next.js ã¨ Astro ã«ã¤ã„ã¦ã¯å¤šå°‘ã®çµŒé¨“ãŒã‚ã‚‹ã‚‚ã®ã®ã€Nuxt ã¯ã‹ãªã‚Šé•·ã„ã“ã¨è§¦ã£ã¦ãŠã‚‰ãšã€SvelteKit ã«è‡³ã£ã¦ã¯ã¾ã£ãŸãã®åˆè¦‹ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã–ã£ã¨èª­ã‚“ã ç¨‹åº¦ã®çŸ¥è­˜ã—ã‹ãªã„ãŸã‚ã€ä½•ã‹ãŠã‹ã—ãªã“ã¨ã‚’ã—ã¦ã„ãŸå ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆãªã©ã§æŒ‡æ‘˜ã—ã¦ã‚‚ã‚‰ãˆã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚]:

- Next.js
  - [ãƒ‡ãƒ¢](https://hono-next-demo.pages.dev/)
  - [ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰](https://github.com/morinokami/hono-anywhere/tree/main/apps/next)
- Astro
  - [ãƒ‡ãƒ¢](https://hono-astro-demo.pages.dev/)
  - [ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰](https://github.com/morinokami/hono-anywhere/tree/main/apps/astro)
- Nuxt
  - [ãƒ‡ãƒ¢](https://hono-nuxt-demo.pages.dev/)
  - [ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰](https://github.com/morinokami/hono-anywhere/tree/main/apps/nuxt)
- SvelteKit
  - [ãƒ‡ãƒ¢](https://hono-sveltekit-demo.pages.dev/)
  - [ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰](https://github.com/morinokami/hono-anywhere/tree/main/apps/sveltekit)

å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã¾ã¨ã‚ãŸãƒªãƒã‚¸ãƒˆãƒªã¯ä»¥ä¸‹ã¨ãªã‚Šã¾ã™:

https://github.com/morinokami/hono-anywhere


## ä½œæˆ¦

ã“ã“ã§ã¯ Hono ã‚’æ§˜ã€…ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¸Šã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã«ã©ã†ã™ã‚Œã°ã„ã„ã‹ã€ãã®å¤§ç­‹ã«ã¤ã„ã¦è€ƒãˆã¦ã„ãã¾ã—ã‚‡ã†ã€‚

Hono ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ [`fetch`](https://hono.dev/docs/api/hono#fetch) ã¨ã„ã† API ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã¯ Hono ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚Šã¾ã™ã€‚ã“ã® `fetch` ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å´ã‹ã‚‰å‹•çš„ã«å‘¼ã³å‡ºã™ã“ã¨ã«ã‚ˆã‚Šã€Hono ã‚¢ãƒ—ãƒªã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å†…ã§å‹•ã‹ã›ãã†ã ã¨ã„ã†å½“ãŸã‚ŠãŒã¾ãšã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚

`fetch` ã®ã‚·ã‚°ãƒãƒãƒ£ã¯

```ts
(request: Request, Env?: E["Bindings"] | {}, executionCtx?: ExecutionContext) => Response | Promise<Response>
```

ã¨ãªã£ã¦ã„ã¾ã™ã€‚å¿…é ˆã®å¼•æ•°ã¯ `request` ã§ã™ãŒã€ä¸Šè¿°ã—ãŸã‚ˆã†ã«ã“ã®å¼•æ•°ã®å‹ã¯ã‚¦ã‚§ãƒ–æ¨™æº–ã® [`Request`](https://developer.mozilla.org/en-US/docs/Web/API/Request) ã¨åŒã˜ã‚‚ã®ã§ã‚ã‚‹ãŸã‚ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å´ã¯è‡ªèº«ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request` ã«å¤‰æ›ã—ã¦ `fetch` ã«æ¸¡ã™ã“ã¨ã§ Hono ã‚¢ãƒ—ãƒªã‚’å‘¼ã³å‡ºã›ãã†ã§ã™ã€‚ã¾ãŸ `fetch` ã®è¿”ã‚Šå€¤ã«ã¤ã„ã¦ã‚‚è¦‹ã¦ã¿ã‚‹ã¨ã€åŒæ§˜ã«ä¸€èˆ¬çš„ãª [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å´ã¯ `fetch` ã®è¿”ã‚Šå€¤ã‚’è‡ªèº«ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã™ã‚‹ã“ã¨ã§ã€Hono ã‚¢ãƒ—ãƒªã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”ã›ãã†ã ã¨ã„ã†ã“ã¨ã‚‚æƒ³åƒã§ãã¾ã™ã€‚

ã¨ã“ã‚ã§ã€å¤šãã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã¯ä¸€èˆ¬ã«ã€API Routes ã‚„ Route Handlers ãªã©ã®ã‚ˆã†ã«åç§°ã“ãç•°ãªã‚‹ã‚‚ã®ã®ã€HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®å‡¦ç†ã‚’ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¨ã—ã¦ç™»éŒ²ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ä¸Šã§è¿°ã¹ãŸã‚ˆã†ãª `fetch` ã®å‘¼ã³å‡ºã—ã‚„ãã®è¿”ã‚Šå€¤ã®å¤‰æ›ã‚’ã“ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã§ãŠã“ãªãˆã°ã€ç›®æ¨™ã¯é”æˆã§ããã†ã ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã“ã“ã¾ã§ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å›³ç¤ºã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```mermaid
flowchart LR
    subgraph ãƒ¦ãƒ¼ã‚¶ãƒ¼
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    end
    
    subgraph ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ---|HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆ|ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
        ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°-.-|ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å›ºæœ‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ|ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
        ãƒãƒ³ãƒ‰ãƒ©ãƒ¼-.-|ã‚¦ã‚§ãƒ–æ¨™æº–ã® Request|Hono
        Hono-.-|ã‚¦ã‚§ãƒ–æ¨™æº–ã® Response|ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
        ãƒãƒ³ãƒ‰ãƒ©ãƒ¼-.-|ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å›ºæœ‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ|ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
        ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°---|HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹|ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    end
```

ä»¥ä¸‹ã§ãŠã“ãªã†ä½œæ¥­ã¯ã€ä¸Šã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«åˆã‚ã›ã¦å®Ÿè£…ã¸ã¨è½ã¨ã—è¾¼ã‚€ã“ã¨ã¨ãªã‚Šã¾ã™ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã”ã¨ã«å¤šå°‘ã®å·®ç•°ã¯ã‚ã‚Œã©ã€ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«ãŠã„ã¦ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ Hono ã®ä¸­ç¶™ã‚’ãŠã“ãªã†ã€ã¨ã„ã†åŒä¸€ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒé€£ç¶šã™ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ç¶šãã‚’èª­ã¿é€²ã‚ã¦ã¿ã¦ãã ã•ã„ã€‚


## Next.js

[Next.js](https://nextjs.org/) ã® App Router ã«ã¯ã€HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ç™»éŒ²ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã¨ã—ã¦ [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers) ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ãŸã¨ãˆã° `app/api/` ã« `route.ts` ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€

```ts:app/api/route.ts
export async function GET(request: Request) {
  // ...
}
```

ã®ã‚ˆã†ã« HTTP ãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒåã®é–¢æ•°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã€`/api` ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ç™»éŒ²ã§ãã¾ã™ã€‚

Next.js ã® Route Handlers ã®å¼•æ•°ã¯ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request` ã‚’æ‹¡å¼µã—ãŸ [`NextRequest`](https://nextjs.org/docs/app/api-reference/functions/next-request) ã§ã‚ã‚Šã€ã¾ãŸè¿”ã‚Šå€¤ã«ã¯ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Response` ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ã¤ã¾ã‚Šã€Hono ã® `fetch` ã«å¼•æ•°ã® `request` ã‚’ç›´æ¥æ¸¡ã—ã€ãã®è¿”ã‚Šå€¤ã‚’ãã®ã¾ã¾ Route Handlers ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”ã™ã“ã¨ã§ã€Hono ã‚¢ãƒ—ãƒªã‚’ Next.js ä¸Šã§å‹•ã‹ã›ã¾ã™ã€‚ã“ã“ã§ã¯ Hono ã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ãŸã‚ã®ç‰¹åˆ¥ãªå¤‰æ›å‡¦ç†ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚

ã¾ãŸã€Next.js ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã¯ [Catch-all Segments](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#catch-all-segments) ã¨ã„ã†æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§ã€ãã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆä»¥ä¸‹ã®ãƒ‘ã‚¹ã«å¯¾ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã¹ã¦åŒã˜ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãŸã¨ãˆã° `app/api/[...route]/route.ts` ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚Œã°ã€`/api/foo` ã‚„ `/api/foo/bar` ãªã©ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã¹ã¦åŒã˜ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§å‡¦ç†ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚‹ãŸã‚^[`/api` ã«ã‚‚ãƒãƒƒãƒã•ã›ãŸã„å ´åˆã¯ã€Optional Catch-all Segments ã‚’ä½¿ç”¨ã—ã¦ `app/api/[[...route]]/route.ts` ã¨è¨­å®šã—ã¦ãã ã•ã„ã€‚]ã€Hono ã‚¢ãƒ—ãƒªã« `/api` ä»¥ä¸‹ã¸ã®ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã‚Œã§ã¯ã€å®Ÿéš›ã« Route Handler ã‚’å®šç¾©ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯ä¸Šã§è¿°ã¹ãŸã‚ˆã†ã« `/api` ä»¥ä¸‹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ Hono ã§å‡¦ç†ã™ã‚‹ã“ã¨ã¨ã™ã‚‹ãŸã‚ã€`app/api/[...route]/route.ts` ã‚’ä½œæˆã—ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™:

```ts:app/api/[...route]/route.ts
import { Hono } from "hono";

const app = new Hono()
  .basePath("/api") // /api ä»¥ä¸‹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã€basePath ã‚’è¨­å®š
  .get("/hello", async (c) => {
    return c.json({ message: "Hello from Hono!" });
  })
  .get("/hello/:name", async (c) => {
    const name = c.req.param("name");
    return c.json({ message: `Hello, ${name}!` });
  });

export type App = typeof app; // hc ã«æ¸¡ã™å‹

export const GET = app.fetch; // GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ Hono ã«æ¸¡ã™
```

ã»ã¼é€šå¸¸ã® Hono ã®ã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€æœ€å¾Œã®è¡Œã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚ã“ã“ã§ã¯ `GET` ã¨ã„ã†åå‰ã®å¤‰æ•°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€`/api` ä»¥ä¸‹ã¸ã® GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã“ã®å¤‰æ•°ãŒæŒ‡ã™é–¢æ•°ãŒå‡¦ç†ã™ã‚‹ã“ã¨ã¨ãªã‚Šã¾ã™ã€‚`GET` ã«ã¯ Hono ã® `fetch` ã‚’ãã®ã¾ã¾è¨­å®šã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã“ã§ã®å‡¦ç†ã¯çµå±€ `app.fetch(request)` ã¨åŒã˜å†…å®¹ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¸€è¡ŒãŒä¸€ç•ªã®ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚

ã“ã®æ™‚ç‚¹ã§ API ã¯æ©Ÿèƒ½ã—ã¾ã™ãŒã€ã“ã® API ã‹ã‚‰å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ãªãƒšãƒ¼ã‚¸ã‚‚ä½œæˆã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚`app/page.tsx` ã®å†…å®¹ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã™:

```tsx:app/page.tsx
import { hc } from "hono/client";

import { App } from "./api/[...route]/route";

export default async function Home() {
  const client = hc<App>("http://localhost:3000/");

  const response = await client.api.hello.$get();
  const { message } = await response.json();

  return (
    <>
      <h1>Hono + Next.js</h1>
      <p>{message}</p>
      <p>View <a href="/api/hello/world">the API response</a></p>
    </>
  );
}
```

Hono ã«ã¯ RPC ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã® [`hc`](https://hono.dev/docs/guides/rpc) é–¢æ•°ãŒå­˜åœ¨ã—ã€ã“ã‚Œã‚’ä½¿ã†ã¨å‹å®‰å…¨ã« Hono ã‚¢ãƒ—ãƒªã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã§ãã¾ã™ã€‚ä¸Šã®ãƒšãƒ¼ã‚¸ã§ã¯ã€`hc` ã‚’ä½¿ã£ã¦ Hono ã‚¢ãƒ—ãƒªã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€ãã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚‚ã¨ã«ãƒšãƒ¼ã‚¸ã‚’ SSR ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

![`/` ã®è¡¨ç¤ºå†…å®¹](/images/hono-anywhere/hono-next-demo.pages.dev.png =224x)

ã€ŒHello from Hono!ã€ã¨ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¦ãŠã‚Šã€Hono ã‹ã‚‰ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ­£ã—ãå–å¾—ã§ãã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã¾ãŸã€`/api/hello/world` ã¸ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€Hono ã‹ã‚‰ç›´æ¥ JSON ãƒ‡ãƒ¼ã‚¿ `{"message":"Hello, world!"}` ã‚’å–å¾—ã§ãã‚‹ã¯ãšã§ã™ã€‚

ã“ã®ã‚ˆã†ã«ã—ã¦ä½œæˆã—ãŸ Hono + Next.js ã‚¢ãƒ—ãƒªã¯ã€[`@cloudflare/next-on-pages`](https://github.com/cloudflare/next-on-pages) ã‚’ä½¿ç”¨ã—ã¦ Cloudflare Pages ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚å°‘ã—èª¿æ•´ã™ã‚Œã° [Vercel](https://hono.dev/docs/getting-started/vercel) ãªã©ä»–ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã¸ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚


## Astro

[Astro](https://astro.build/) ã«ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹ API ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã¨ã—ã¦ [Endpoints](https://docs.astro.build/en/guides/endpoints/) ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚Endpoints ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€`src/pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã« `.js` ã¾ãŸã¯ `.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ãã“ã‹ã‚‰ HTTP ãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒåã®é–¢æ•°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ã¾ãŸã€Astro ã§ã¯ `[...route].ts` ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä½¿ã†ã“ã¨ã§ã€Next.js ã® Catch-all Segments ã®ã‚ˆã†ã«ãã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆä»¥ä¸‹ã®ãƒ‘ã‚¹ã«å¯¾ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã¹ã¦åŒã˜ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã—ã€ãŸã¨ãˆã° `src/pages/api/[...route].ts` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã¨ã€`/api/foo` ã‚„ `/api/foo/bar` ã ã‘ã§ãªã `/api` ã«ã‚‚ãƒãƒƒãƒã™ã‚‹ãŸã‚ã€ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨ Next.js ã® [Optional Catch-all Segments](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#optional-catch-all-segments) ã«è¿‘ã„æŒ™å‹•ã¨ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

Astro ã® Endpoints ã«æ¸¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã€ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request` ã§ã¯ãªã [`context`](https://docs.astro.build/en/reference/api-reference/) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™:

```ts
import type { APIContext } from "astro";

export function GET(context: APIContext) {
  // ...
}
```

ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯å‹•çš„ãªãƒ«ãƒ¼ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’ä¿æŒã™ã‚‹ [`params`](https://docs.astro.build/en/reference/api-reference/#params) ã‚„ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿æŒã™ã‚‹ [`clientAddress`](https://docs.astro.build/en/reference/api-reference/#clientaddress) ãªã©æ§˜ã€…ãªå€¤ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚å¹¸ã„ã€ãã®ä¸­ã«ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request` ãŒ [`request`](https://docs.astro.build/en/reference/api-reference/#request) ã¨ã—ã¦å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚’ãã®ã¾ã¾ Hono ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€Endpoints ã¯ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Response` ã‚’è¿”ã‚Šå€¤ã¨ã—ã¦å—ã‘ä»˜ã‘ã‚‹ãŸã‚ã€ã“ã“ã§ã‚‚ Hono ã® `fetch` ã®è¿”ã‚Šå€¤ã‚’ãã®ã¾ã¾è¿”ã™ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

Next.js ç‰ˆã¨åŒæ§˜ã® API ã‚’å®šç¾©ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãã®ãŸã‚ã«ã¯ã€`src/pages/api/[...route].ts` ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™:

```ts:src/pages/api/[...route].ts
import type { APIRoute } from "astro";
import { Hono } from "hono";

const app = new Hono()
  .basePath("/api")
  .get("/hello", async (c) => {
    return c.json({ message: "Hello from Hono!" });
  })
  .get("/hello/:name", async (c) => {
    const name = c.req.param("name");
    return c.json({ message: `Hello, ${name}!` });
  });

export type App = typeof app;

export const GET: APIRoute = (context) => app.fetch(context.request);
```

Next.js ç‰ˆã®ã‚³ãƒ¼ãƒ‰ã¨ã»ã¨ã‚“ã©é•ã„ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€`GET` ã®å®Ÿè£…ãŒå¾®å¦™ã«ç•°ãªã£ã¦ã„ã¾ã™ã€‚ä¸Šã§è¿°ã¹ãŸã‚ˆã†ã«ã€Astro ã® Endpoints ã¯ `context` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¼•æ•°ã«å–ã‚‹ãŸã‚ã€ãã‚Œã‚’å—ã‘å–ã‚Š Hono ã® `fetch` ã« `Request` ã‚’å¼•ãæ¸¡ã™é–¢æ•°ã‚’ `GET` ã¨ã—ã¦å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`/api` ä»¥ä¸‹ã®ãƒ‘ã‚¹ã«å¯¾ã™ã‚‹ GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‡¦ç†ã¯ã“ã®é–¢æ•°ãŒæ‹…å½“ã™ã‚‹ã“ã¨ã¨ãªã‚Šã¾ã™ã€‚

Astro ç‰ˆã®ãƒšãƒ¼ã‚¸ã¯ä»¥ä¸‹ã¨ãªã‚Šã¾ã™:

```tsx:src/pages/index.astro
---
import { hc } from "hono/client";

import type { App } from "./api/[...route]";

const client = hc<App>("http://localhost:4321/");

const response = await client.api.hello.$get();
const { message } = await response.json();
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Hono + Astro</title>
  </head>
  <body>
    <h1>Hono + Astro</h1>
    <p>{message}</p>
    <p>View <a href="/api/hello/world">the API response</a></p>
  </body>
</html>
```

Astro ã§ã¯ã‚³ãƒ¼ãƒ‰ãƒ•ã‚§ãƒ³ã‚¹ã¨å‘¼ã°ã‚Œã‚‹ `---` ã§å›²ã¾ã‚ŒãŸé ˜åŸŸã« JavaScript ã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ãŸã‚ã€ã“ã“ã§ Hono ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã€API ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚API ã‹ã‚‰å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ `message` ã¯ã‚³ãƒ¼ãƒ‰ãƒ•ã‚§ãƒ³ã‚¹ä¸‹éƒ¨ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…ã§ä½¿ç”¨ã§ãã‚‹ãŸã‚ã€ã“ã‚Œã‚’ãã®ã¾ã¾ç”»é¢ã«è¡¨ç¤ºã—ã€Next.js ç‰ˆã¨åŒæ§˜ã®å†…å®¹ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚


## Nuxt

[Nuxt](https://nuxt.com/) ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã«ãŠã„ã¦å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ã‚’ [`server/`](https://nuxt.com/docs/guide/directory-structure/server) ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã«é…ç½®ã—ã¾ã™ã€‚ç‰¹ã« `server/api/` ä»¥ä¸‹ã«é…ç½®ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ [Server Routes](https://nuxt.com/docs/guide/directory-structure/server#server-routes) ã¨å‘¼ã°ã‚Œ `/api/*` ã¸ã¨ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œã‚‹ãŸã‚ã€ãŸã¨ãˆã° `server/api/hello.ts` ã‚’ç”¨æ„ã—ã¦ãŠã‘ã° `/api/hello` ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ã¾ãŸã€`[...].ts` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«åã«ã‚ˆã‚Š [Catch-all Route](https://nuxt.com/docs/guide/directory-structure/server#catch-all-route) ã‚’å®Ÿç¾ã§ãã‚‹ãŸã‚ã€ã“ã‚Œã¾ã§ã¨åŒã˜ã‚ˆã†ã« `/api` ä»¥ä¸‹ã®ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åŒã˜ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§å‡¦ç†ã™ã‚‹ã«ã¯ `server/api/[...].ts` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚Œã°ã‚ˆã„ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

Server Routes ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«ã¯ `defineEventHandler` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€Nuxt ã¯å†…éƒ¨ã§ [Nitro](https://nitro.build/) ã¨ã„ã†ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ã•ã‚‰ã«ãã®å†…éƒ¨ã§ã¯ [h3](https://h3.unjs.io/) ã¨ã„ã† HTTP ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã“ã†ã—ãŸäº‹æƒ…ã«ã‚ˆã‚Šã€`defineEventHandler` ã®å¼•æ•°ã«æŒ‡å®šã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«æ¸¡ã•ã‚Œã‚‹å¼•æ•°ã¯ã€ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request` ã§ã¯ãªã h3 ã® `H3Event` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ãªã£ã¦ã„ã¾ã™ã€‚ã‚ˆã£ã¦ã€Hono ã‚’å‘¼ã³å‡ºã™ãŸã‚ã«ã¯ã“ã® `H3Event` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ `Request` ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€h3 ã«ã¯ã¾ã•ã«ãã®ãŸã‚ã« [`toWebRequest`](https://h3.unjs.io/utils/request#towebrequestevent) ã¨ã„ã†é–¢æ•°ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ä»Šå›ã¯ã“ã‚Œã‚’ä½¿ã£ã¦ `Request` ã‚’å–å¾—ã™ã‚‹ã“ã¨ã¨ã—ã¾ã™ã€‚

`server/api/[...].ts` ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã—ã‚‡ã†:

```ts:server/api/[...].ts
import { Hono } from "hono"

const app = new Hono()
  .basePath('/api')
  .get("/hello", async (c) => {
    return c.json({ message: "Hello from Hono!" })
  })
  .get("/hello/:name", async (c) => {
    const name = c.req.param("name");
    return c.json({ message: `Hello, ${name}!` });
  })

export type App = typeof app;

export default defineEventHandler(async (event) => {
  const req = toWebRequest(event) // H3Event ã‹ã‚‰ Request ã‚’å–å¾—
  return app.fetch(req) // Hono ã« Request ã‚’æ¸¡ã™
})
```

ä¸Šã§è¿°ã¹ãŸé€šã‚Šã€`defineEventHandler` ã®å¼•æ•°ã«ã¯ `H3Event` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¸¡ã•ã‚Œã‚‹ãŸã‚ã€ã“ã‚Œã‚’ `toWebRequest` ã§ `Request` ã«å¤‰æ›ã— Hono ã«æ¸¡ã™ã“ã¨ã§ API ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ãã®ä»–ã®å®Ÿè£…ã¯ã“ã‚Œã¾ã§ã¨å®Œå…¨ã«åŒã˜ã§ã™ã€‚

ãƒšãƒ¼ã‚¸å´ã®å®Ÿè£…ã¯ä»¥ä¸‹ã¨ãªã‚Šã¾ã™:

```vue:app.vue
<script setup lang="ts">
import { hc } from "hono/client";

import type { App } from "~/server/api/[...]";

useHead({
  title: "Hono + Nuxt", // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¨­å®š
});

const client = hc<App>("http://localhost:3000/");

const response = await client.api.hello.$get();
const { message } = await response.json();
</script>

<template>
  <h1>Hono + Nuxt</h1>
  <p>{{ message }}</p>
  <p>View <a href="/api/hello/world">the API response</a></p>
</template>
```

Vue ã§ã¯ [`<script setup>`](https://vuejs.org/api/sfc-script-setup.html) ã«ã‚ˆã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã€ã“ã“ã§ Hono ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã€API ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…ã§è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã¾ã§ã¨åŒæ§˜ã®å†…å®¹ã‚’ç”»é¢ã«è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚


## SvelteKit

[SvleteKit](https://svelte.dev/docs/kit/introduction) ã§ã¯ã€`src/routes` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒ«ãƒ¼ãƒˆã¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã§ã€[`+page.svelte`](https://svelte.dev/docs/kit/routing#page) ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãã‚ŒãŒç½®ã‹ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ãƒ‘ã‚¹ã«å¯¾å¿œã™ã‚‹ãƒšãƒ¼ã‚¸ã¨ãªã‚Šã€ã¾ãŸ [`+server.ts`](https://svelte.dev/docs/kit/routing#server) ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€`[...route]` ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã— [Rest parameters](https://svelte.dev/docs/kit/advanced-routing#Rest-parameters) ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨åŒæ§˜ã«ãã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆä»¥ä¸‹ã®ãƒ‘ã‚¹ã«å¯¾ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã¹ã¦åŒã˜ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`+server.ts` ã‹ã‚‰ GET ã‚„ POST ãªã© HTTP ãƒ¡ã‚½ãƒƒãƒ‰åã«å¯¾å¿œã™ã‚‹é–¢æ•°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®é–¢æ•°ã«ã¯ `RequestEvent` ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¸¡ã•ã‚Œã¾ã™ãŒã€ã“ã“ã«ã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request` ãŒ `request` ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨åŒæ§˜ã«ã“ã‚Œã‚’ Hono ã«æ¸¡ã—ã¦ API ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

`src/routes/api/[...route]/+server.ts` ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã—ã‚‡ã†:

```ts:src/routes/api/[...route]/+server.ts
import { Hono } from "hono";

import type { RequestHandler } from './$types';

const app = new Hono()
  .basePath("/api")
  .get("/hello", async (c) => {
    return c.json({ message: "Hello from Hono!" });
  })
  .get("/hello/:name", async (c) => {
    const name = c.req.param("name");
    return c.json({ message: `Hello, ${name}!` });
  });

export type App = typeof app;

export const GET: RequestHandler = ({ request }) => app.fetch(request);
```

ã“ã‚Œã¾ã§ã¨åŒæ§˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹ãŸã‚ã€ã‚‚ã¯ã‚„èª¬æ˜ã¯ä¸è¦ã§ã—ã‚‡ã†ã€‚

ç¶šã„ã¦ãƒšãƒ¼ã‚¸å´ã®å®Ÿè£…ã«ç§»ã‚Šã¾ã™ãŒã€SvleteKit ã§ã¯ [`+page.server.ts`](https://svelte.dev/docs/kit/routing#page-page.server.js) ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `+page.svelte` ã¨åŒéšå±¤ã«ç½®ãã“ã¨ã§ã€ãã®ãƒšãƒ¼ã‚¸ãŒåˆ©ç”¨ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’æŒ‡å®šã§ãã¾ã™ã®ã§ã€ã¾ãšã¯ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ Hono ã¨ã®é€šä¿¡å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã«ã—ã¾ã™:

```ts:src/routes/+page.server.ts
import { hc } from "hono/client";

import type { PageServerLoad } from './$types';
import type { App } from "./api/[...route]/+server";

export const load: PageServerLoad = async () => {
  const client = hc<App>("http://localhost:5173/");

  const response = await client.api.hello.$get();
  const { message } = await response.json();

  return {
    message,
  }
};
```

ãƒšãƒ¼ã‚¸å´ã§ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šï¼ˆ`const { data } = $props();`ï¼‰ã€ç”»é¢ã«è¡¨ç¤ºã—ã¾ã™:

```html:src/routes/+page.svelte
<script lang="ts">
  const { data } = $props();
</script>

<svelte:head>
  <title>Hono + SvelteKit</title>
</svelte:head>

<h1>Hono + SvelteKit</h1>
<p>{data.message}</p>
<p>View <a href="/api/hello/world">the API response</a></p>
```

è¨˜è¿°ã™ã‚‹å ´æ‰€ã“ãç•°ãªã‚Œã©ã€ã‚„ã¯ã‚Šã“ã“ã§ã‚‚ `hc` ã‚’åˆæœŸåŒ–ã— API ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã¯åŒã˜ã§ã‚ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚


## ãŠã‚ã‚Šã«

Hono ãŒã‚¦ã‚§ãƒ–æ¨™æº–ã® `Request` ã¨ `Response` ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹ã¨ã„ã†ç‰¹æ€§ã‚’æ´»ã‹ã™ã“ã¨ã§ã€Hono ã‚’æ§˜ã€…ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ¡ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¸Šã§å‹•ã‹ã›ã‚‹ã“ã¨ã‚’ã“ã“ã¾ã§è¦‹ã¦ãã¾ã—ãŸã€‚ä»Šå›ã¯ Next.jsã€Astroã€Nuxtã€ãã—ã¦ SvelteKit ã¨ã„ã† 4 ã¤ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä¾‹ã¨ã—ã¦å–ã‚Šä¸Šã’ã¾ã—ãŸãŒã€åŒæ§˜ã®ç™ºæƒ³ã«ã‚ˆã‚Šä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã« Hono ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã‚‚å¯èƒ½ã§ã—ã‚‡ã†ã€‚ãœã²è‡ªåˆ†ã®æ¨ã—ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚‚ Hono ã¨çµ„ã¿åˆã‚ã›ã‚‰ã‚Œãªã„ã‹è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
