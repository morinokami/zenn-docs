---
title: "AST としてのプログラム"
---

ソフトウェア開発に変更はつきものです。たとえばソフトウェアにバグが見つかった場合、そのバグを修正するためにコードを変更する必要があります。また、新しい機能を追加するために、既存のコードベースに新たなコードを追加することもあります。変更の種類はさまざまですが、その一つに、「同一のパターンのコードを一括して別のパターンへと変更する」というものがあります。

依存しているパッケージに破壊的変更が加えられた際、その変更に追従するために、私たちはそのパッケージを使用しているコードを修正します。あるいは、使用しているプログラミング言語に新しいエレガントな機能が追加されたので、その機能により古い書き方のコードを置き換えることもあるでしょう。

こうした特定パターンの置き換えという作業において、変更箇所が複数、場合によってはコードベース全体に及ぶことは少なくありません。数 10 箇所程度の変更であれば手作業で直接修正をおこなうことも可能ですが、その数が数千、数万となってくると、もはや現実的ではなくなってきます。では、どうすればよいのでしょうか？一つの解決策としては、正規表現を用いた検索と置換をおこなうことが考えられます。

TODO: 正規表現は強力なツールだが、限界がある

正規表現を用いる方法に限界が生じる原因の一つとして、コードを単純に文字列として扱っていることが考えられます。「コードは文字列なのだから、それを文字列として扱うことが問題であるとは、どういうことか」と思われるかもしれません。確かに私たちの書いたコードは、エディタ上で編集され、ファイルとして保存されている間は単なる文字列と考えて差し支えないでしょう。しかし、
